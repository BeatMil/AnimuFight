[gd_scene load_steps=37 format=3 uid="uid://cijpe5mfa2ffb"]

[ext_resource type="Script" uid="uid://clroey4coqt7x" path="res://scripts/stage_01.gd" id="1_4caca"]
[ext_resource type="PackedScene" uid="uid://2b1ywpnefvth" path="res://nodes/player.tscn" id="1_i6ddm"]
[ext_resource type="Texture2D" uid="uid://cei5iglc0dohc" path="res://media/sprites/stage01/home.png" id="2_4caca"]
[ext_resource type="Texture2D" uid="uid://c2anqn8y5dr50" path="res://media/sprites/stage01/floor.png" id="2_fnmkw"]
[ext_resource type="PackedScene" uid="uid://da0dtoj0kt1oe" path="res://nodes/ui/restart_menu.tscn" id="2_nh3b5"]
[ext_resource type="Texture2D" uid="uid://cppqygp1b42a1" path="res://media/sprites/stage01/building.png" id="4_dimc6"]
[ext_resource type="Texture2D" uid="uid://nv6dkesnffpt" path="res://media/sprites/stage01/floor_dark.png" id="5_nasqd"]
[ext_resource type="Script" uid="uid://duxhld58ww51q" path="res://scripts/enemy_spawn_helper.gd" id="6_l457t"]
[ext_resource type="Texture2D" uid="uid://m74we0184cjq" path="res://media/sprites/stage01/seven_eleven.png" id="6_sgik7"]
[ext_resource type="PackedScene" uid="uid://c4m5deiee8q8w" path="res://nodes/boss01.tscn" id="7_nh3b5"]
[ext_resource type="Texture2D" uid="uid://ccuevl8yvbirg" path="res://media/sprites/stage01/8-12_girl.png" id="7_pxpxr"]
[ext_resource type="PackedScene" uid="uid://b2vaqeiw3q18o" path="res://nodes/enemy_01.tscn" id="8_nasqd"]
[ext_resource type="Script" uid="uid://cat1ebbeoo01d" path="res://scripts/enemy_spawner_stage01.gd" id="8_yxbv0"]
[ext_resource type="PackedScene" uid="uid://by4mdvdte0wet" path="res://nodes/enemy_02.tscn" id="9_dimc6"]
[ext_resource type="PackedScene" uid="uid://bhw2h1n6yqhk8" path="res://nodes/enemy_04.tscn" id="10_bc8xj"]
[ext_resource type="PackedScene" uid="uid://bfomnvauggr4o" path="res://nodes/junction_box.tscn" id="11_l457t"]
[ext_resource type="PackedScene" uid="uid://d0ufo617puti8" path="res://nodes/enemy_06.tscn" id="12_gsglw"]
[ext_resource type="PackedScene" uid="uid://dxf7beg6mlrhw" path="res://nodes/falling_flower_pot.tscn" id="15_bc8xj"]
[ext_resource type="PackedScene" uid="uid://dhqwhd8echl8w" path="res://nodes/light_pole.tscn" id="17_c2i1s"]
[ext_resource type="PackedScene" uid="uid://brp5ha3kowlpa" path="res://nodes/market_green.tscn" id="18_dhovc"]
[ext_resource type="Texture2D" uid="uid://n7xbpwiq1n77" path="res://media/sprites/mango_boss/mango_boss_sit.png" id="19_yxbv0"]
[ext_resource type="AudioStream" uid="uid://cxkb2rpnoq1wv" path="res://media/sfxs/phone-typing-333292.mp3" id="20_yxbv0"]
[ext_resource type="PackedScene" uid="uid://derpnighpvd6t" path="res://nodes/walls/wall_invisible.tscn" id="21_v7t3f"]

[sub_resource type="Animation" id="Animation_lrdte"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [0]
}

[sub_resource type="Animation" id="Animation_mqdkf"]
resource_name = "run"
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.466667),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [0, 1]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_1fbf0"]
_data = {
&"RESET": SubResource("Animation_lrdte"),
&"run": SubResource("Animation_mqdkf")
}

[sub_resource type="RectangleShape2D" id="RectangleShape2D_i6ddm"]
size = Vector2(1920, 326)

[sub_resource type="Animation" id="Animation_sgik7"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [1]
}

[sub_resource type="Animation" id="Animation_v7t3f"]
resource_name = "play_phone"
length = 3.3
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.0666667, 0.133333, 0.266667, 0.333333, 0.466667, 0.533333, 0.6, 0.666667, 1.03333, 1.1, 1.23333, 1.3, 1.43333, 1.5, 1.66667, 1.73333, 1.83333, 1.9, 2, 2.06667, 2.16667, 2.23333, 2.36667, 2.43333, 2.56667, 2.63333, 2.83333, 2.9, 3.06667, 3.13333),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0]
}
tracks/1/type = "audio"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("AudioStreamPlayer2D")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"clips": [{
"end_offset": 20.8109,
"start_offset": 0.209523,
"stream": ExtResource("20_yxbv0")
}],
"times": PackedFloat32Array(0.0666667)
}
tracks/1/use_blend = true

[sub_resource type="Animation" id="Animation_yxbv0"]
resource_name = "shock"
length = 0.400003
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [2]
}
tracks/1/type = "audio"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("AudioStreamPlayer2D")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"clips": [],
"times": PackedFloat32Array()
}
tracks/1/use_blend = true

[sub_resource type="AnimationLibrary" id="AnimationLibrary_pxpxr"]
_data = {
&"RESET": SubResource("Animation_sgik7"),
&"play_phone": SubResource("Animation_v7t3f"),
&"shock": SubResource("Animation_yxbv0")
}

[sub_resource type="Animation" id="Animation_pxpxr"]
resource_name = "1_in"
length = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(0, 72)]
}

[sub_resource type="Animation" id="Animation_wntu7"]
resource_name = "2_in"
length = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("../2:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(0, -312)]
}

[sub_resource type="Animation" id="Animation_f33yp"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(0, -2240)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("../2:position")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(0, -2240)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_mqdkf"]
_data = {
&"1_in": SubResource("Animation_pxpxr"),
&"2_in": SubResource("Animation_wntu7"),
&"RESET": SubResource("Animation_f33yp")
}

[sub_resource type="RectangleShape2D" id="RectangleShape2D_v7t3f"]
size = Vector2(128, 512)

[node name="Stage01" type="Node2D"]
script = ExtResource("1_4caca")

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="RestartMenu" parent="CanvasLayer" instance=ExtResource("2_nh3b5")]
visible = false

[node name="Player" parent="." instance=ExtResource("1_i6ddm")]
position = Vector2(-320, 568)

[node name="Map" type="Node2D" parent="."]

[node name="Building" type="Sprite2D" parent="Map"]
position = Vector2(2893, 341)
texture = ExtResource("4_dimc6")

[node name="Home" type="Sprite2D" parent="Map"]
position = Vector2(-896, 328)
texture = ExtResource("2_4caca")

[node name="8-12" type="Sprite2D" parent="Map"]
position = Vector2(1008, 472)
texture = ExtResource("6_sgik7")

[node name="8-12Girl" type="Sprite2D" parent="Map/8-12"]
position = Vector2(472, -96)
texture = ExtResource("7_pxpxr")
hframes = 2

[node name="AnimationPlayer" type="AnimationPlayer" parent="Map/8-12/8-12Girl"]
libraries = {
&"": SubResource("AnimationLibrary_1fbf0")
}
autoplay = "run"

[node name="Floor" type="Sprite2D" parent="Map" groups=["ground"]]
position = Vector2(961, 637)
texture = ExtResource("5_nasqd")

[node name="StaticBody2D" type="StaticBody2D" parent="Map/Floor" groups=["ground"]]
position = Vector2(35, 304)
collision_layer = 8
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Map/Floor/StaticBody2D"]
position = Vector2(-35, 8)
shape = SubResource("RectangleShape2D_i6ddm")

[node name="Floor2" type="Sprite2D" parent="Map" groups=["ground"]]
position = Vector2(2881, 637)
texture = ExtResource("2_fnmkw")

[node name="StaticBody2D" type="StaticBody2D" parent="Map/Floor2" groups=["ground"]]
position = Vector2(35, 304)
collision_layer = 8
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Map/Floor2/StaticBody2D"]
position = Vector2(-35, 8)
shape = SubResource("RectangleShape2D_i6ddm")

[node name="Floor4" type="Sprite2D" parent="Map" groups=["ground"]]
position = Vector2(4800, 637)
texture = ExtResource("2_fnmkw")

[node name="StaticBody2D" type="StaticBody2D" parent="Map/Floor4" groups=["ground"]]
position = Vector2(35, 304)
collision_layer = 8
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Map/Floor4/StaticBody2D"]
position = Vector2(-35, 8)
shape = SubResource("RectangleShape2D_i6ddm")

[node name="Floor5" type="Sprite2D" parent="Map" groups=["ground"]]
position = Vector2(-2877, 637)
texture = ExtResource("2_fnmkw")

[node name="StaticBody2D" type="StaticBody2D" parent="Map/Floor5" groups=["ground"]]
position = Vector2(35, 304)
collision_layer = 8
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Map/Floor5/StaticBody2D"]
position = Vector2(-35, 8)
shape = SubResource("RectangleShape2D_i6ddm")

[node name="Floor3" type="Sprite2D" parent="Map" groups=["ground"]]
position = Vector2(-958, 637)
texture = ExtResource("2_fnmkw")

[node name="StaticBody2D" type="StaticBody2D" parent="Map/Floor3" groups=["ground"]]
position = Vector2(35, 304)
collision_layer = 8
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Map/Floor3/StaticBody2D"]
position = Vector2(-35, 8)
shape = SubResource("RectangleShape2D_i6ddm")

[node name="EnemySpawnerNew" type="Node2D" parent="." node_paths=PackedStringArray("target", "enemy_to_spawn")]
script = ExtResource("8_yxbv0")
target = NodePath("../Player")
enemy_to_spawn = [NodePath("../EnemySpawnHelper/Phase1"), NodePath("../EnemySpawnHelper/Phase2"), NodePath("../EnemySpawnHelper/Phase3"), NodePath("../EnemySpawnHelper/Phase4"), NodePath("../EnemySpawnHelper/Phase5"), NodePath("../EnemySpawnHelper/Phase6"), NodePath("../EnemySpawnHelper/Phase7"), NodePath("../EnemySpawnHelper/Phase8"), NodePath("../EnemySpawnHelper/Phase9")]

[node name="enemyCount" type="Node" parent="EnemySpawnerNew"]

[node name="EnemySpawnHelper" type="Node" parent="."]

[node name="Phase1" type="Node" parent="EnemySpawnHelper"]

[node name="e4" type="Node" parent="EnemySpawnHelper/Phase1" node_paths=PackedStringArray("position")]
script = ExtResource("6_l457t")
position = NodePath("../../../SpawnPos/pos1")
hp = 10
object = ExtResource("9_dimc6")

[node name="Phase2" type="Node" parent="EnemySpawnHelper"]

[node name="e3" type="Node" parent="EnemySpawnHelper/Phase2" node_paths=PackedStringArray("position")]
script = ExtResource("6_l457t")
position = NodePath("../../../SpawnPos/pos1")
hp = 50
object = ExtResource("12_gsglw")

[node name="Phase3" type="Node" parent="EnemySpawnHelper"]

[node name="e2" type="Node" parent="EnemySpawnHelper/Phase3" node_paths=PackedStringArray("position")]
script = ExtResource("6_l457t")
position = NodePath("../../../SpawnPos/pos1")
hp = 30
object = ExtResource("9_dimc6")

[node name="e1" type="Node" parent="EnemySpawnHelper/Phase3" node_paths=PackedStringArray("position")]
script = ExtResource("6_l457t")
position = NodePath("../../../SpawnPos/pos3")
hp = 30
object = ExtResource("8_nasqd")

[node name="Phase4" type="Node" parent="EnemySpawnHelper"]

[node name="e2" type="Node" parent="EnemySpawnHelper/Phase4" node_paths=PackedStringArray("position")]
script = ExtResource("6_l457t")
position = NodePath("../../../SpawnPos/pos2")
hp = 30
object = ExtResource("8_nasqd")

[node name="e3" type="Node" parent="EnemySpawnHelper/Phase4" node_paths=PackedStringArray("position")]
script = ExtResource("6_l457t")
position = NodePath("../../../SpawnPos/pos3")
hp = 30
object = ExtResource("8_nasqd")

[node name="e4" type="Node" parent="EnemySpawnHelper/Phase4" node_paths=PackedStringArray("position")]
script = ExtResource("6_l457t")
position = NodePath("../../../SpawnPos/pos4")
hp = 30
object = ExtResource("9_dimc6")

[node name="Phase5" type="Node" parent="EnemySpawnHelper"]

[node name="e2" type="Node" parent="EnemySpawnHelper/Phase5" node_paths=PackedStringArray("position")]
script = ExtResource("6_l457t")
position = NodePath("../../../SpawnPos/pos6")
hp = 30
object = ExtResource("8_nasqd")

[node name="e3" type="Node" parent="EnemySpawnHelper/Phase5" node_paths=PackedStringArray("position")]
script = ExtResource("6_l457t")
position = NodePath("../../../SpawnPos/pos4")
hp = 30
object = ExtResource("8_nasqd")

[node name="e4" type="Node" parent="EnemySpawnHelper/Phase5" node_paths=PackedStringArray("position")]
script = ExtResource("6_l457t")
position = NodePath("../../../SpawnPos/pos5")
hp = 30
object = ExtResource("9_dimc6")

[node name="e5" type="Node" parent="EnemySpawnHelper/Phase5" node_paths=PackedStringArray("position")]
script = ExtResource("6_l457t")
position = NodePath("../../../SpawnPos/pos6")
hp = 30
object = ExtResource("9_dimc6")

[node name="Phase6" type="Node" parent="EnemySpawnHelper"]

[node name="e2" type="Node" parent="EnemySpawnHelper/Phase6" node_paths=PackedStringArray("position")]
script = ExtResource("6_l457t")
position = NodePath("../../../SpawnPos/pos4")
hp = 10
object = ExtResource("8_nasqd")

[node name="e4" type="Node" parent="EnemySpawnHelper/Phase6" node_paths=PackedStringArray("position")]
script = ExtResource("6_l457t")
position = NodePath("../../../SpawnPos/pos5")
hp = 10
object = ExtResource("9_dimc6")

[node name="Phase7" type="Node" parent="EnemySpawnHelper"]

[node name="e4" type="Node" parent="EnemySpawnHelper/Phase7" node_paths=PackedStringArray("position")]
script = ExtResource("6_l457t")
position = NodePath("../../../SpawnPos/pos5")
hp = 200
object = ExtResource("10_bc8xj")

[node name="Phase8" type="Node" parent="EnemySpawnHelper"]

[node name="e4" type="Node" parent="EnemySpawnHelper/Phase8" node_paths=PackedStringArray("position")]
script = ExtResource("6_l457t")
position = NodePath("../../../SpawnPos/pos1")
hp = 200
object = ExtResource("10_bc8xj")

[node name="e3" type="Node" parent="EnemySpawnHelper/Phase8" node_paths=PackedStringArray("position")]
script = ExtResource("6_l457t")
position = NodePath("../../../SpawnPos/pos5")
hp = 10
object = ExtResource("8_nasqd")

[node name="e5" type="Node" parent="EnemySpawnHelper/Phase8" node_paths=PackedStringArray("position")]
script = ExtResource("6_l457t")
position = NodePath("../../../SpawnPos/pos6")
hp = 10
object = ExtResource("8_nasqd")

[node name="Phase9" type="Node" parent="EnemySpawnHelper"]

[node name="boss01" type="Node" parent="EnemySpawnHelper/Phase9" node_paths=PackedStringArray("position")]
script = ExtResource("6_l457t")
position = NodePath("../../../SpawnPos/pos2")
hp = 50
object = ExtResource("7_nh3b5")

[node name="boss02" type="Node" parent="EnemySpawnHelper" node_paths=PackedStringArray("position")]
script = ExtResource("6_l457t")
position = NodePath("../../SpawnPos/pos3")
hp = 50
object = ExtResource("7_nh3b5")

[node name="e2" type="Node" parent="EnemySpawnHelper" node_paths=PackedStringArray("position")]
script = ExtResource("6_l457t")
position = NodePath("../../SpawnPos/pos1")
hp = 50
object = ExtResource("8_nasqd")

[node name="SpawnPos" type="Node" parent="."]

[node name="pos1" type="Marker2D" parent="SpawnPos"]
position = Vector2(1497, -340)

[node name="pos2" type="Marker2D" parent="SpawnPos"]
position = Vector2(2842, 585)

[node name="pos3" type="Marker2D" parent="SpawnPos"]
position = Vector2(186, -351)

[node name="pos4" type="Marker2D" parent="SpawnPos"]
position = Vector2(-552, 716)

[node name="pos5" type="Marker2D" parent="SpawnPos"]
position = Vector2(2648, 727)

[node name="pos6" type="Marker2D" parent="SpawnPos"]
position = Vector2(3520, 368)

[node name="FallingFlowerPot" parent="." instance=ExtResource("15_bc8xj")]
position = Vector2(-656, 576)

[node name="JunctionBox" parent="." instance=ExtResource("11_l457t")]
position = Vector2(72, 560)

[node name="LightPole" parent="." instance=ExtResource("17_c2i1s")]
position = Vector2(781, 320)

[node name="MarketGreen" parent="." instance=ExtResource("18_dhovc")]
position = Vector2(3526, 516)
scale = Vector2(0.8, 0.8)

[node name="MangoBossSitBanana" type="Sprite2D" parent="."]
position = Vector2(3656, 597)
scale = Vector2(0.8, 0.8)
texture = ExtResource("19_yxbv0")
hframes = 3
frame = 1

[node name="AudioStreamPlayer2D" type="AudioStreamPlayer2D" parent="MangoBossSitBanana"]
scale = Vector2(1.25, 1.25)
volume_db = 10.0

[node name="AnimationPlayer" type="AnimationPlayer" parent="MangoBossSitBanana"]
libraries = {
&"": SubResource("AnimationLibrary_pxpxr")
}
autoplay = "play_phone"

[node name="AreaLockPlayer" type="AnimationPlayer" parent="."]
root_node = NodePath("../AreaLock/1")
libraries = {
&"": SubResource("AnimationLibrary_mqdkf")
}

[node name="Area1LockTrigger" type="Area2D" parent="."]
position = Vector2(-136, 520)
collision_layer = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Area1LockTrigger"]
shape = SubResource("RectangleShape2D_v7t3f")

[node name="AreaLock" type="Node2D" parent="."]

[node name="1" type="Node2D" parent="AreaLock"]
position = Vector2(0, -2240)

[node name="WallL" parent="AreaLock/1" instance=ExtResource("21_v7t3f")]
position = Vector2(-2024, 0)

[node name="WallR" parent="AreaLock/1" instance=ExtResource("21_v7t3f")]
position = Vector2(1808, 0)

[node name="2" type="Node2D" parent="AreaLock"]
position = Vector2(0, -2240)

[node name="WallL" parent="AreaLock/2" instance=ExtResource("21_v7t3f")]
position = Vector2(1808, 0)

[node name="WallR" parent="AreaLock/2" instance=ExtResource("21_v7t3f")]
position = Vector2(3976, 0)

[connection signal="banana_fly" from="MarketGreen" to="." method="_on_market_green_banana_fly"]
[connection signal="body_entered" from="Area1LockTrigger" to="." method="_on_area_1_lock_trigger_body_entered"]
